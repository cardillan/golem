    16 instructions before optimizations.
     1 instructions eliminated by Jump Normalization (5 iterations).
     1 instructions eliminated by Jump Optimization (5 iterations).
    10 instructions modified by Expression Optimization (3 iterations).
    21 instructions eliminated by Data Flow Optimization (2 passes, 8 iterations).
     1 instructions eliminated by Loop Optimization (3 iterations).
     1 loops improved by Loop Optimization.
    26 instructions added by Loop Unrolling (4 iterations).
     1 loops unrolled by Loop Unrolling.
     1 instructions eliminated by Unreachable Code Elimination (2 iterations).
    17 instructions after optimizations.

Pass 1: speed optimization selection (cost limit 987):
  * Unroll loop at line 12:5                                     size   +15, benefit    12500.0, efficiency    833.333 (+15 instructions)

Modifications by Iterated phase, Jump Normalization, pass 1, iteration 1 (-1 instructions):
 
     1 setprop @lead shard1 90
     2 setprop @graphite shard1 120
     3 label *label0
-    * jump *label2 equal true false
     4 label *label3
     5 label *label4
     6 sensor *tmp0 switch1 @enabled

Modifications by Iterated phase, Jump Optimization, pass 1, iteration 1 (-1 instructions):
 
     4 label *label3
     5 label *label4
     6 sensor *tmp0 switch1 @enabled
-    * op equal *tmp1 *tmp0 false
-    * jump *label3 notEqual *tmp1 false
+    7 jump *label3 equal *tmp0 false
     8 label *label5
     9 control enabled switch1 false
    10 set :i 0

Modifications by Iterated phase, Loop Optimization, pass 1, iteration 1 (-1 instructions):
 
     9 control enabled switch1 false
    10 set :i 0
    11 label *label6
-    * jump *label8 greaterThanEq :i 10
+   12 label *label9
    13 lookup item *tmp3 :i
    14 setprop *tmp3 shard1 3000
    15 label *label7
    16 op add :i :i 1
-    * jump *label6 always
+   17 jump *label9 lessThan :i 10
    18 label *label8
    19 label *label1
    20 jump *label0 always

Modifications by Unroll loop at line 12:5 (+26 instructions):
 
     7 jump *label3 equal *tmp0 false
     8 label *label5
     9 control enabled switch1 false
-    * set :i 0
-    * label *label6
-    * label *label9
-    * lookup item *tmp3 :i
-    * setprop *tmp3 shard1 3000
-    * label *label7
-    * op add :i :i 1
-    * jump *label9 lessThan :i 10
-    * label *label8
+   10 set :i 0
+   11 label *label10
+   12 label *label11
+   13 lookup item *tmp3 :i
+   14 setprop *tmp3 shard1 3000
+   15 label *label12
+   16 op add :i :i 1
+   17 label *label13
+   18 lookup item *tmp3 :i
+   19 setprop *tmp3 shard1 3000
+   20 label *label14
+   21 op add :i :i 1
+   22 label *label15
+   23 lookup item *tmp3 :i
+   24 setprop *tmp3 shard1 3000
+   25 label *label16
+   26 op add :i :i 1
+   27 label *label17
+   28 lookup item *tmp3 :i
+   29 setprop *tmp3 shard1 3000
+   30 label *label18
+   31 op add :i :i 1
+   32 label *label19
+   33 lookup item *tmp3 :i
+   34 setprop *tmp3 shard1 3000
+   35 label *label20
+   36 op add :i :i 1
+   37 label *label21
+   38 lookup item *tmp3 :i
+   39 setprop *tmp3 shard1 3000
+   40 label *label22
+   41 op add :i :i 1
+   42 label *label23
+   43 lookup item *tmp3 :i
+   44 setprop *tmp3 shard1 3000
+   45 label *label24
+   46 op add :i :i 1
+   47 label *label25
+   48 lookup item *tmp3 :i
+   49 setprop *tmp3 shard1 3000
+   50 label *label26
+   51 op add :i :i 1
+   52 label *label27
+   53 lookup item *tmp3 :i
+   54 setprop *tmp3 shard1 3000
+   55 label *label28
+   56 op add :i :i 1
+   57 label *label29
+   58 lookup item *tmp3 :i
+   59 setprop *tmp3 shard1 3000
+   60 label *label30
+   61 op add :i :i 1
+   62 label *label8
    63 label *label1
    64 jump *label0 always
    65 label *label2

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
    10 set :i 0
    11 label *label10
    12 label *label11
-    * lookup item *tmp3 :i
+   13 lookup item *tmp3 0
    14 setprop *tmp3 shard1 3000
    15 label *label12
-    * op add :i :i 1
+   16 op add :i 0 1
    17 label *label13
-    * lookup item *tmp3 :i
+   18 lookup item *tmp3 1
    19 setprop *tmp3 shard1 3000
    20 label *label14
-    * op add :i :i 1
+   21 op add :i 1 1
    22 label *label15
-    * lookup item *tmp3 :i
+   23 lookup item *tmp3 2
    24 setprop *tmp3 shard1 3000
    25 label *label16
-    * op add :i :i 1
+   26 op add :i 2 1
    27 label *label17
-    * lookup item *tmp3 :i
+   28 lookup item *tmp3 3
    29 setprop *tmp3 shard1 3000
    30 label *label18
-    * op add :i :i 1
+   31 op add :i 3 1
    32 label *label19
-    * lookup item *tmp3 :i
+   33 lookup item *tmp3 4
    34 setprop *tmp3 shard1 3000
    35 label *label20
-    * op add :i :i 1
+   36 op add :i 4 1
    37 label *label21
-    * lookup item *tmp3 :i
+   38 lookup item *tmp3 5
    39 setprop *tmp3 shard1 3000
    40 label *label22
-    * op add :i :i 1
+   41 op add :i 5 1
    42 label *label23
-    * lookup item *tmp3 :i
+   43 lookup item *tmp3 6
    44 setprop *tmp3 shard1 3000
    45 label *label24
-    * op add :i :i 1
+   46 op add :i 6 1
    47 label *label25
-    * lookup item *tmp3 :i
+   48 lookup item *tmp3 7
    49 setprop *tmp3 shard1 3000
    50 label *label26
-    * op add :i :i 1
+   51 op add :i 7 1
    52 label *label27
-    * lookup item *tmp3 :i
+   53 lookup item *tmp3 8
    54 setprop *tmp3 shard1 3000
    55 label *label28
-    * op add :i :i 1
+   56 op add :i 8 1
    57 label *label29
-    * lookup item *tmp3 :i
+   58 lookup item *tmp3 9
    59 setprop *tmp3 shard1 3000
    60 label *label30
-    * op add :i :i 1
+   61 op add :i 9 1
    62 label *label8
    63 label *label1
    64 jump *label0 always

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-11 instructions):
 
     7 jump *label3 equal *tmp0 false
     8 label *label5
     9 control enabled switch1 false
-    * set :i 0
    10 label *label10
    11 label *label11
    12 lookup item *tmp3 0
    13 setprop *tmp3 shard1 3000
    14 label *label12
-    * op add :i 0 1
    15 label *label13
    16 lookup item *tmp3 1
    17 setprop *tmp3 shard1 3000
    18 label *label14
-    * op add :i 1 1
    19 label *label15
    20 lookup item *tmp3 2
    21 setprop *tmp3 shard1 3000
    22 label *label16
-    * op add :i 2 1
    23 label *label17
    24 lookup item *tmp3 3
    25 setprop *tmp3 shard1 3000
    26 label *label18
-    * op add :i 3 1
    27 label *label19
    28 lookup item *tmp3 4
    29 setprop *tmp3 shard1 3000
    30 label *label20
-    * op add :i 4 1
    31 label *label21
    32 lookup item *tmp3 5
    33 setprop *tmp3 shard1 3000
    34 label *label22
-    * op add :i 5 1
    35 label *label23
    36 lookup item *tmp3 6
    37 setprop *tmp3 shard1 3000
    38 label *label24
-    * op add :i 6 1
    39 label *label25
    40 lookup item *tmp3 7
    41 setprop *tmp3 shard1 3000
    42 label *label26
-    * op add :i 7 1
    43 label *label27
    44 lookup item *tmp3 8
    45 setprop *tmp3 shard1 3000
    46 label *label28
-    * op add :i 8 1
    47 label *label29
    48 lookup item *tmp3 9
    49 setprop *tmp3 shard1 3000
    50 label *label30
-    * op add :i 9 1
    51 label *label8
    52 label *label1
    53 jump *label0 always

Modifications by Iterated phase, Expression Optimization, pass 2, iteration 1:
 
     9 control enabled switch1 false
    10 label *label10
    11 label *label11
-    * lookup item *tmp3 0
+   12 set *tmp3 @copper
    13 setprop *tmp3 shard1 3000
    14 label *label12
    15 label *label13
-    * lookup item *tmp3 1
+   16 set *tmp3 @lead
    17 setprop *tmp3 shard1 3000
    18 label *label14
    19 label *label15
-    * lookup item *tmp3 2
+   20 set *tmp3 @metaglass
    21 setprop *tmp3 shard1 3000
    22 label *label16
    23 label *label17
-    * lookup item *tmp3 3
+   24 set *tmp3 @graphite
    25 setprop *tmp3 shard1 3000
    26 label *label18
    27 label *label19
-    * lookup item *tmp3 4
+   28 set *tmp3 @sand
    29 setprop *tmp3 shard1 3000
    30 label *label20
    31 label *label21
-    * lookup item *tmp3 5
+   32 set *tmp3 @coal
    33 setprop *tmp3 shard1 3000
    34 label *label22
    35 label *label23
-    * lookup item *tmp3 6
+   36 set *tmp3 @titanium
    37 setprop *tmp3 shard1 3000
    38 label *label24
    39 label *label25
-    * lookup item *tmp3 7
+   40 set *tmp3 @thorium
    41 setprop *tmp3 shard1 3000
    42 label *label26
    43 label *label27
-    * lookup item *tmp3 8
+   44 set *tmp3 @scrap
    45 setprop *tmp3 shard1 3000
    46 label *label28
    47 label *label29
-    * lookup item *tmp3 9
+   48 set *tmp3 @silicon
    49 setprop *tmp3 shard1 3000
    50 label *label30
    51 label *label8

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 1:
 
    10 label *label10
    11 label *label11
    12 set *tmp3 @copper
-    * setprop *tmp3 shard1 3000
+   13 setprop @copper shard1 3000
    14 label *label12
    15 label *label13
    16 set *tmp3 @lead
-    * setprop *tmp3 shard1 3000
+   17 setprop @lead shard1 3000
    18 label *label14
    19 label *label15
    20 set *tmp3 @metaglass
-    * setprop *tmp3 shard1 3000
+   21 setprop @metaglass shard1 3000
    22 label *label16
    23 label *label17
    24 set *tmp3 @graphite
-    * setprop *tmp3 shard1 3000
+   25 setprop @graphite shard1 3000
    26 label *label18
    27 label *label19
    28 set *tmp3 @sand
-    * setprop *tmp3 shard1 3000
+   29 setprop @sand shard1 3000
    30 label *label20
    31 label *label21
    32 set *tmp3 @coal
-    * setprop *tmp3 shard1 3000
+   33 setprop @coal shard1 3000
    34 label *label22
    35 label *label23
    36 set *tmp3 @titanium
-    * setprop *tmp3 shard1 3000
+   37 setprop @titanium shard1 3000
    38 label *label24
    39 label *label25
    40 set *tmp3 @thorium
-    * setprop *tmp3 shard1 3000
+   41 setprop @thorium shard1 3000
    42 label *label26
    43 label *label27
    44 set *tmp3 @scrap
-    * setprop *tmp3 shard1 3000
+   45 setprop @scrap shard1 3000
    46 label *label28
    47 label *label29
    48 set *tmp3 @silicon
-    * setprop *tmp3 shard1 3000
+   49 setprop @silicon shard1 3000
    50 label *label30
    51 label *label8
    52 label *label1

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 2 (-10 instructions):
 
     9 control enabled switch1 false
    10 label *label10
    11 label *label11
-    * set *tmp3 @copper
    12 setprop @copper shard1 3000
    13 label *label12
    14 label *label13
-    * set *tmp3 @lead
    15 setprop @lead shard1 3000
    16 label *label14
    17 label *label15
-    * set *tmp3 @metaglass
    18 setprop @metaglass shard1 3000
    19 label *label16
    20 label *label17
-    * set *tmp3 @graphite
    21 setprop @graphite shard1 3000
    22 label *label18
    23 label *label19
-    * set *tmp3 @sand
    24 setprop @sand shard1 3000
    25 label *label20
    26 label *label21
-    * set *tmp3 @coal
    27 setprop @coal shard1 3000
    28 label *label22
    29 label *label23
-    * set *tmp3 @titanium
    30 setprop @titanium shard1 3000
    31 label *label24
    32 label *label25
-    * set *tmp3 @thorium
    33 setprop @thorium shard1 3000
    34 label *label26
    35 label *label27
-    * set *tmp3 @scrap
    36 setprop @scrap shard1 3000
    37 label *label28
    38 label *label29
-    * set *tmp3 @silicon
    39 setprop @silicon shard1 3000
    40 label *label30
    41 label *label8

Modifications by Jumps phase, Jump Normalization, pass 4, iteration 1:
 
     2 setprop @graphite shard1 120
     3 label *label0
     4 label *label3
-    * label *label4
     5 sensor *tmp0 switch1 @enabled
     6 jump *label3 equal *tmp0 false
-    * label *label5
     7 control enabled switch1 false
-    * label *label10
-    * label *label11
     8 setprop @copper shard1 3000
-    * label *label12
-    * label *label13
     9 setprop @lead shard1 3000
-    * label *label14
-    * label *label15
    10 setprop @metaglass shard1 3000
-    * label *label16
-    * label *label17
    11 setprop @graphite shard1 3000
-    * label *label18
-    * label *label19
    12 setprop @sand shard1 3000
-    * label *label20
-    * label *label21
    13 setprop @coal shard1 3000
-    * label *label22
-    * label *label23
    14 setprop @titanium shard1 3000
-    * label *label24
-    * label *label25
    15 setprop @thorium shard1 3000
-    * label *label26
-    * label *label27
    16 setprop @scrap shard1 3000
-    * label *label28
-    * label *label29
    17 setprop @silicon shard1 3000
-    * label *label30
-    * label *label8
-    * label *label1
    18 jump *label0 always
-    * label *label2
    19 end

Modifications by Jumps phase, Unreachable Code Elimination, pass 4, iteration 1 (-1 instructions):
 
    16 setprop @scrap shard1 3000
    17 setprop @silicon shard1 3000
    18 jump *label0 always
-    * end

Final code before resolving virtual instructions:

    0:  setprop @copper shard1 300                                   shard1.setprop(@copper, 300);
    1:  setprop @lead shard1 90                                      shard1.setprop(@lead, 90);
    2:  setprop @graphite shard1 120                                 shard1.setprop(@graphite, 120);
        label *label0                                                while true do
        label *label3                                                do while !switch1.enabled;
    3:  sensor *tmp0 switch1 @enabled                                ...
    4:  jump *label3 equal *tmp0 false                               ...
    5:  control enabled switch1 false 0 0 0                          switch1.enabled = false;
    6:  setprop @copper shard1 3000                                  shard1.setprop(lookup(:item, i), 3000);
    7:  setprop @lead shard1 3000                                    ...
    8:  setprop @metaglass shard1 3000                               ...
    9:  setprop @graphite shard1 3000                                ...
   10:  setprop @sand shard1 3000                                    ...
   11:  setprop @coal shard1 3000                                    ...
   12:  setprop @titanium shard1 3000                                ...
   13:  setprop @thorium shard1 3000                                 ...
   14:  setprop @scrap shard1 3000                                   ...
   15:  setprop @silicon shard1 3000                                 ...
   16:  jump *label0 always 0 0                                      while true do


Code size and number of instantiations by function:
  Size  Times  AvgSize  Function
    18     1x     18,0  <no function>

Performance: parsed in 111 ms, compiled in 206 ms, optimized in 119 ms, run in 2 ms.
Error connecting to Mlog Watcher: Connection refused: connect
  - make sure Mindustry with active Mlog Watcher mod is running
  - verify Mlog Watcher listens on port 9992

Program output (4 steps):
The program didn't generate any output.
Execution exception at instruction 3: sensor *tmp0 switch1 @enabled:
Instruction not supported by Mindcode emulator.
(Use the '#set err-unsupported-opcode = false;' directive or the '--err-unsupported-opcode false' command line option to ignore this exception.)
