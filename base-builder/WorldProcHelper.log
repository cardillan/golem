    17 instructions before optimizations.
     2 instructions eliminated by Jump Normalization (2 passes, 7 iterations).
     1 instructions eliminated by Condition Optimization (8 iterations).
    10 instructions modified by Expression Optimization (5 iterations).
    21 instructions eliminated by Data Flow Optimization (3 passes, 11 iterations).
       1 loop conditions were partially rotated.
    26 instructions added by Loop Unrolling (6 iterations).
     1 loops unrolled by Loop Unrolling.
     1 instructions eliminated by Unreachable Code Elimination (2 iterations).
    18 instructions after optimizations.

Pass 3: speed optimization selection (cost limit 986):
  * Unroll loop at line 15:5                                     size   +15, benefit    12500.0, efficiency    833.333 (+15 instructions)

Modifications by Iterated phase, Jump Normalization, pass 1, iteration 1 (-1 instructions):
 
     2 setprop @lead shard1 90
     3 setprop @graphite shard1 120
     4 label *label0
-    * jump *label2 equal true false
     5 label *label3
     6 label *label4
     7 sensor *tmp0 switch1 @enabled

Modifications by Iterated phase, Condition Optimization, pass 1, iteration 1 (-1 instructions):
 
     5 label *label3
     6 label *label4
     7 sensor *tmp0 switch1 @enabled
-    * op equal *tmp1 *tmp0 false
-    * jump *label3 notEqual *tmp1 false
+    8 jump *label3 equal *tmp0 false
     9 label *label5
    10 control enabled switch1 false
    11 set :i 0

Modifications by Iterated phase, Loop Rotation, pass 1, iteration 1:
 
    11 set :i 0
    12 label *label6
    13 jump *label8 greaterThanEq :i 10
+   14 label *label9
    15 lookup item *tmp3 :i
    16 setprop *tmp3 shard1 3000
    17 label *label7
    18 op add :i :i 1
-    * jump *label6 always
+   19 jump *label9 lessThan :i 10
    20 label *label8
    21 label *label1
    22 jump *label0 always

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 1:
 
    10 control enabled switch1 false
    11 set :i 0
    12 label *label6
-    * jump *label8 greaterThanEq :i 10
+   13 jump *label8 greaterThanEq 0 10
    14 label *label9
    15 lookup item *tmp3 :i
    16 setprop *tmp3 shard1 3000

Modifications by Iterated phase, Jump Normalization, pass 3, iteration 1 (-1 instructions):
 
    10 control enabled switch1 false
    11 set :i 0
    12 label *label6
-    * jump *label8 greaterThanEq 0 10
    13 label *label9
    14 lookup item *tmp3 :i
    15 setprop *tmp3 shard1 3000

Modifications by Unroll loop at line 15:5 (+26 instructions):
 
     8 jump *label3 equal *tmp0 false
     9 label *label5
    10 control enabled switch1 false
-    * set :i 0
-    * label *label6
-    * label *label9
-    * lookup item *tmp3 :i
-    * setprop *tmp3 shard1 3000
-    * label *label7
-    * op add :i :i 1
-    * jump *label9 lessThan :i 10
-    * label *label8
+   11 set :i 0
+   12 label *label10
+   13 lookup item *tmp3 :i
+   14 setprop *tmp3 shard1 3000
+   15 label *label11
+   16 op add :i :i 1
+   17 lookup item *tmp3 :i
+   18 setprop *tmp3 shard1 3000
+   19 label *label12
+   20 op add :i :i 1
+   21 lookup item *tmp3 :i
+   22 setprop *tmp3 shard1 3000
+   23 label *label13
+   24 op add :i :i 1
+   25 lookup item *tmp3 :i
+   26 setprop *tmp3 shard1 3000
+   27 label *label14
+   28 op add :i :i 1
+   29 lookup item *tmp3 :i
+   30 setprop *tmp3 shard1 3000
+   31 label *label15
+   32 op add :i :i 1
+   33 lookup item *tmp3 :i
+   34 setprop *tmp3 shard1 3000
+   35 label *label16
+   36 op add :i :i 1
+   37 lookup item *tmp3 :i
+   38 setprop *tmp3 shard1 3000
+   39 label *label17
+   40 op add :i :i 1
+   41 lookup item *tmp3 :i
+   42 setprop *tmp3 shard1 3000
+   43 label *label18
+   44 op add :i :i 1
+   45 lookup item *tmp3 :i
+   46 setprop *tmp3 shard1 3000
+   47 label *label19
+   48 op add :i :i 1
+   49 lookup item *tmp3 :i
+   50 setprop *tmp3 shard1 3000
+   51 label *label20
+   52 op add :i :i 1
+   53 label *label8
    54 label *label1
    55 jump *label0 always
    56 label *label2

Modifications by Iterated phase, Data Flow Optimization, pass 3, iteration 1:
 
    10 control enabled switch1 false
    11 set :i 0
    12 label *label10
-    * lookup item *tmp3 :i
+   13 lookup item *tmp3 0
    14 setprop *tmp3 shard1 3000
    15 label *label11
-    * op add :i :i 1
-    * lookup item *tmp3 :i
+   16 op add :i 0 1
+   17 lookup item *tmp3 1
    18 setprop *tmp3 shard1 3000
    19 label *label12
-    * op add :i :i 1
-    * lookup item *tmp3 :i
+   20 op add :i 1 1
+   21 lookup item *tmp3 2
    22 setprop *tmp3 shard1 3000
    23 label *label13
-    * op add :i :i 1
-    * lookup item *tmp3 :i
+   24 op add :i 2 1
+   25 lookup item *tmp3 3
    26 setprop *tmp3 shard1 3000
    27 label *label14
-    * op add :i :i 1
-    * lookup item *tmp3 :i
+   28 op add :i 3 1
+   29 lookup item *tmp3 4
    30 setprop *tmp3 shard1 3000
    31 label *label15
-    * op add :i :i 1
-    * lookup item *tmp3 :i
+   32 op add :i 4 1
+   33 lookup item *tmp3 5
    34 setprop *tmp3 shard1 3000
    35 label *label16
-    * op add :i :i 1
-    * lookup item *tmp3 :i
+   36 op add :i 5 1
+   37 lookup item *tmp3 6
    38 setprop *tmp3 shard1 3000
    39 label *label17
-    * op add :i :i 1
-    * lookup item *tmp3 :i
+   40 op add :i 6 1
+   41 lookup item *tmp3 7
    42 setprop *tmp3 shard1 3000
    43 label *label18
-    * op add :i :i 1
-    * lookup item *tmp3 :i
+   44 op add :i 7 1
+   45 lookup item *tmp3 8
    46 setprop *tmp3 shard1 3000
    47 label *label19
-    * op add :i :i 1
-    * lookup item *tmp3 :i
+   48 op add :i 8 1
+   49 lookup item *tmp3 9
    50 setprop *tmp3 shard1 3000
    51 label *label20
-    * op add :i :i 1
+   52 op add :i 9 1
    53 label *label8
    54 label *label1
    55 jump *label0 always

Modifications by Iterated phase, Data Flow Optimization, pass 3, iteration 2 (-11 instructions):
 
     8 jump *label3 equal *tmp0 false
     9 label *label5
    10 control enabled switch1 false
-    * set :i 0
    11 label *label10
    12 lookup item *tmp3 0
    13 setprop *tmp3 shard1 3000
    14 label *label11
-    * op add :i 0 1
    15 lookup item *tmp3 1
    16 setprop *tmp3 shard1 3000
    17 label *label12
-    * op add :i 1 1
    18 lookup item *tmp3 2
    19 setprop *tmp3 shard1 3000
    20 label *label13
-    * op add :i 2 1
    21 lookup item *tmp3 3
    22 setprop *tmp3 shard1 3000
    23 label *label14
-    * op add :i 3 1
    24 lookup item *tmp3 4
    25 setprop *tmp3 shard1 3000
    26 label *label15
-    * op add :i 4 1
    27 lookup item *tmp3 5
    28 setprop *tmp3 shard1 3000
    29 label *label16
-    * op add :i 5 1
    30 lookup item *tmp3 6
    31 setprop *tmp3 shard1 3000
    32 label *label17
-    * op add :i 6 1
    33 lookup item *tmp3 7
    34 setprop *tmp3 shard1 3000
    35 label *label18
-    * op add :i 7 1
    36 lookup item *tmp3 8
    37 setprop *tmp3 shard1 3000
    38 label *label19
-    * op add :i 8 1
    39 lookup item *tmp3 9
    40 setprop *tmp3 shard1 3000
    41 label *label20
-    * op add :i 9 1
    42 label *label8
    43 label *label1
    44 jump *label0 always

Modifications by Iterated phase, Expression Optimization, pass 4, iteration 1:
 
     9 label *label5
    10 control enabled switch1 false
    11 label *label10
-    * lookup item *tmp3 0
+   12 set *tmp3 @copper
    13 setprop *tmp3 shard1 3000
    14 label *label11
-    * lookup item *tmp3 1
+   15 set *tmp3 @lead
    16 setprop *tmp3 shard1 3000
    17 label *label12
-    * lookup item *tmp3 2
+   18 set *tmp3 @metaglass
    19 setprop *tmp3 shard1 3000
    20 label *label13
-    * lookup item *tmp3 3
+   21 set *tmp3 @graphite
    22 setprop *tmp3 shard1 3000
    23 label *label14
-    * lookup item *tmp3 4
+   24 set *tmp3 @sand
    25 setprop *tmp3 shard1 3000
    26 label *label15
-    * lookup item *tmp3 5
+   27 set *tmp3 @coal
    28 setprop *tmp3 shard1 3000
    29 label *label16
-    * lookup item *tmp3 6
+   30 set *tmp3 @titanium
    31 setprop *tmp3 shard1 3000
    32 label *label17
-    * lookup item *tmp3 7
+   33 set *tmp3 @thorium
    34 setprop *tmp3 shard1 3000
    35 label *label18
-    * lookup item *tmp3 8
+   36 set *tmp3 @scrap
    37 setprop *tmp3 shard1 3000
    38 label *label19
-    * lookup item *tmp3 9
+   39 set *tmp3 @silicon
    40 setprop *tmp3 shard1 3000
    41 label *label20
    42 label *label8

Modifications by Iterated phase, Data Flow Optimization, pass 4, iteration 1:
 
    10 control enabled switch1 false
    11 label *label10
    12 set *tmp3 @copper
-    * setprop *tmp3 shard1 3000
+   13 setprop @copper shard1 3000
    14 label *label11
    15 set *tmp3 @lead
-    * setprop *tmp3 shard1 3000
+   16 setprop @lead shard1 3000
    17 label *label12
    18 set *tmp3 @metaglass
-    * setprop *tmp3 shard1 3000
+   19 setprop @metaglass shard1 3000
    20 label *label13
    21 set *tmp3 @graphite
-    * setprop *tmp3 shard1 3000
+   22 setprop @graphite shard1 3000
    23 label *label14
    24 set *tmp3 @sand
-    * setprop *tmp3 shard1 3000
+   25 setprop @sand shard1 3000
    26 label *label15
    27 set *tmp3 @coal
-    * setprop *tmp3 shard1 3000
+   28 setprop @coal shard1 3000
    29 label *label16
    30 set *tmp3 @titanium
-    * setprop *tmp3 shard1 3000
+   31 setprop @titanium shard1 3000
    32 label *label17
    33 set *tmp3 @thorium
-    * setprop *tmp3 shard1 3000
+   34 setprop @thorium shard1 3000
    35 label *label18
    36 set *tmp3 @scrap
-    * setprop *tmp3 shard1 3000
+   37 setprop @scrap shard1 3000
    38 label *label19
    39 set *tmp3 @silicon
-    * setprop *tmp3 shard1 3000
+   40 setprop @silicon shard1 3000
    41 label *label20
    42 label *label8
    43 label *label1

Modifications by Iterated phase, Data Flow Optimization, pass 4, iteration 2 (-10 instructions):
 
     9 label *label5
    10 control enabled switch1 false
    11 label *label10
-    * set *tmp3 @copper
    12 setprop @copper shard1 3000
    13 label *label11
-    * set *tmp3 @lead
    14 setprop @lead shard1 3000
    15 label *label12
-    * set *tmp3 @metaglass
    16 setprop @metaglass shard1 3000
    17 label *label13
-    * set *tmp3 @graphite
    18 setprop @graphite shard1 3000
    19 label *label14
-    * set *tmp3 @sand
    20 setprop @sand shard1 3000
    21 label *label15
-    * set *tmp3 @coal
    22 setprop @coal shard1 3000
    23 label *label16
-    * set *tmp3 @titanium
    24 setprop @titanium shard1 3000
    25 label *label17
-    * set *tmp3 @thorium
    26 setprop @thorium shard1 3000
    27 label *label18
-    * set *tmp3 @scrap
    28 setprop @scrap shard1 3000
    29 label *label19
-    * set *tmp3 @silicon
    30 setprop @silicon shard1 3000
    31 label *label20
    32 label *label8

Modifications by Jumps phase, Unreachable Code Elimination, pass 6, iteration 1 (-1 instructions):
 
     3 setprop @graphite shard1 120
     4 label *label0
     5 label *label3
-    * label *label4
     6 sensor *tmp0 switch1 @enabled
     7 jump *label3 equal *tmp0 false
-    * label *label5
     8 control enabled switch1 false
-    * label *label10
     9 setprop @copper shard1 3000
-    * label *label11
    10 setprop @lead shard1 3000
-    * label *label12
    11 setprop @metaglass shard1 3000
-    * label *label13
    12 setprop @graphite shard1 3000
-    * label *label14
    13 setprop @sand shard1 3000
-    * label *label15
    14 setprop @coal shard1 3000
-    * label *label16
    15 setprop @titanium shard1 3000
-    * label *label17
    16 setprop @thorium shard1 3000
-    * label *label18
    17 setprop @scrap shard1 3000
-    * label *label19
    18 setprop @silicon shard1 3000
-    * label *label20
-    * label *label8
-    * label *label1
    19 jump *label0 always
-    * label *label2
-    * end

Final code before resolving virtual instructions:

    0:  set *id "name: Base Builder - Helper\nversion: v0.4.0"       #set target = 8w;
    1:  setprop @copper shard1 300                                   shard1.setprop(@copper, 300);
    2:  setprop @lead shard1 90                                      shard1.setprop(@lead, 90);
    3:  setprop @graphite shard1 120                                 shard1.setprop(@graphite, 120);
        label *label0                                                while true do
        label *label3                                                do while !switch1.enabled;
    4:  sensor *tmp0 switch1 @enabled                                ...
    5:  jump *label3 equal *tmp0 false                               ...
    6:  control enabled switch1 false 0 0 0                          switch1.enabled = false;
    7:  setprop @copper shard1 3000                                  shard1.setprop(lookup(:item, i), 3000);
    8:  setprop @lead shard1 3000                                    ...
    9:  setprop @metaglass shard1 3000                               ...
   10:  setprop @graphite shard1 3000                                ...
   11:  setprop @sand shard1 3000                                    ...
   12:  setprop @coal shard1 3000                                    ...
   13:  setprop @titanium shard1 3000                                ...
   14:  setprop @thorium shard1 3000                                 ...
   15:  setprop @scrap shard1 3000                                   ...
   16:  setprop @silicon shard1 3000                                 ...
   17:  jump *label0 always 0 0                                      while true do


Code size and number of instantiations by function:
  Size  Times  AvgSize  Function
    19     1x     19,0  <no function>
