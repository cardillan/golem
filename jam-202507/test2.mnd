#set target = 8;

var animation = -15;

inline def lerp(from, to, ratio)
    (1 - ratio) * from + ratio * to;
end;

inline void animate()
    if animation == -15 then

    elsif animation < 0 then
        color(0, 0, 0, 192);
        rect(0, 0, 176, 176);
        col(%[white]);
        image(HEADER_X, HEADER1_Y - 24, @mega, 32, 0);
    else
        reset();
        clear(0, 0, 32);
        col(%[white]);
        var ratio = max(0, min(animation / 30, 1));
        var x = lerp(HEADER_X, 176 / 2, ratio);
        var y = lerp(HEADER1_Y - 24, 176 / 2, ratio);
        var size = lerp(32, 168, ratio);
        image(x, y, @mega, size, 0);
        drawflush(display1);
    end;
    animation++;
end;
