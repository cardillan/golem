volatile var
    pressEnabled = true,
    smelterEnabled = true,
    producedUnit = @mono;

begin
    while true do
        press1.enabled = pressEnabled;
        smelter1.enabled = smelterEnabled;
        generator1.enabled = battery1.@totalPower < 3500;
    end;
end;