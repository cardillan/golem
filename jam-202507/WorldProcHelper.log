    15 instructions before optimizations.
     1 instructions eliminated by Jump Normalization (5 iterations).
     1 instructions eliminated by Jump Optimization (5 iterations).
    10 instructions modified by Expression Optimization (3 iterations).
    21 instructions eliminated by Data Flow Optimization (2 passes, 8 iterations).
     1 instructions eliminated by Loop Optimization (3 iterations).
     1 loops improved by Loop Optimization.
    26 instructions added by Loop Unrolling (4 iterations).
     1 loops unrolled by Loop Unrolling.
     1 instructions eliminated by Unreachable Code Elimination (2 iterations).
    16 instructions after optimizations.

Pass 1: speed optimization selection (cost limit 988):
  * Unroll loop at line 11:5                                     size   +15, benefit    12500.0, efficiency    833.333 (+15 instructions)

Modifications by Iterated phase, Jump Normalization, pass 1, iteration 1 (-1 instructions):
     0 setprop @copper shard1 120
     1 setprop @lead shard1 90
     2 label *label0
-    * jump *label2 equal true false
     3 label *label3
     4 label *label4
     5 sensor *tmp0 switch1 @enabled

Modifications by Iterated phase, Jump Optimization, pass 1, iteration 1 (-1 instructions):
 
     3 label *label3
     4 label *label4
     5 sensor *tmp0 switch1 @enabled
-    * op equal *tmp1 *tmp0 false
-    * jump *label3 notEqual *tmp1 false
+    6 jump *label3 equal *tmp0 false
     7 label *label5
     8 control enabled switch1 false
     9 set :i 0

Modifications by Iterated phase, Loop Optimization, pass 1, iteration 1 (-1 instructions):
 
     8 control enabled switch1 false
     9 set :i 0
    10 label *label6
-    * jump *label8 greaterThanEq :i 10
+   11 label *label9
    12 lookup item *tmp3 :i
    13 setprop *tmp3 shard1 3000
    14 label *label7
    15 op add :i :i 1
-    * jump *label6 always
+   16 jump *label9 lessThan :i 10
    17 label *label8
    18 label *label1
    19 jump *label0 always

Modifications by Unroll loop at line 11:5 (+26 instructions):
 
     6 jump *label3 equal *tmp0 false
     7 label *label5
     8 control enabled switch1 false
-    * set :i 0
-    * label *label6
-    * label *label9
-    * lookup item *tmp3 :i
-    * setprop *tmp3 shard1 3000
-    * label *label7
-    * op add :i :i 1
-    * jump *label9 lessThan :i 10
-    * label *label8
+    9 set :i 0
+   10 label *label10
+   11 label *label11
+   12 lookup item *tmp3 :i
+   13 setprop *tmp3 shard1 3000
+   14 label *label12
+   15 op add :i :i 1
+   16 label *label13
+   17 lookup item *tmp3 :i
+   18 setprop *tmp3 shard1 3000
+   19 label *label14
+   20 op add :i :i 1
+   21 label *label15
+   22 lookup item *tmp3 :i
+   23 setprop *tmp3 shard1 3000
+   24 label *label16
+   25 op add :i :i 1
+   26 label *label17
+   27 lookup item *tmp3 :i
+   28 setprop *tmp3 shard1 3000
+   29 label *label18
+   30 op add :i :i 1
+   31 label *label19
+   32 lookup item *tmp3 :i
+   33 setprop *tmp3 shard1 3000
+   34 label *label20
+   35 op add :i :i 1
+   36 label *label21
+   37 lookup item *tmp3 :i
+   38 setprop *tmp3 shard1 3000
+   39 label *label22
+   40 op add :i :i 1
+   41 label *label23
+   42 lookup item *tmp3 :i
+   43 setprop *tmp3 shard1 3000
+   44 label *label24
+   45 op add :i :i 1
+   46 label *label25
+   47 lookup item *tmp3 :i
+   48 setprop *tmp3 shard1 3000
+   49 label *label26
+   50 op add :i :i 1
+   51 label *label27
+   52 lookup item *tmp3 :i
+   53 setprop *tmp3 shard1 3000
+   54 label *label28
+   55 op add :i :i 1
+   56 label *label29
+   57 lookup item *tmp3 :i
+   58 setprop *tmp3 shard1 3000
+   59 label *label30
+   60 op add :i :i 1
+   61 label *label8
    62 label *label1
    63 jump *label0 always
    64 label *label2

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 1:
 
     9 set :i 0
    10 label *label10
    11 label *label11
-    * lookup item *tmp3 :i
+   12 lookup item *tmp3 0
    13 setprop *tmp3 shard1 3000
    14 label *label12
-    * op add :i :i 1
+   15 op add :i 0 1
    16 label *label13
-    * lookup item *tmp3 :i
+   17 lookup item *tmp3 1
    18 setprop *tmp3 shard1 3000
    19 label *label14
-    * op add :i :i 1
+   20 op add :i 1 1
    21 label *label15
-    * lookup item *tmp3 :i
+   22 lookup item *tmp3 2
    23 setprop *tmp3 shard1 3000
    24 label *label16
-    * op add :i :i 1
+   25 op add :i 2 1
    26 label *label17
-    * lookup item *tmp3 :i
+   27 lookup item *tmp3 3
    28 setprop *tmp3 shard1 3000
    29 label *label18
-    * op add :i :i 1
+   30 op add :i 3 1
    31 label *label19
-    * lookup item *tmp3 :i
+   32 lookup item *tmp3 4
    33 setprop *tmp3 shard1 3000
    34 label *label20
-    * op add :i :i 1
+   35 op add :i 4 1
    36 label *label21
-    * lookup item *tmp3 :i
+   37 lookup item *tmp3 5
    38 setprop *tmp3 shard1 3000
    39 label *label22
-    * op add :i :i 1
+   40 op add :i 5 1
    41 label *label23
-    * lookup item *tmp3 :i
+   42 lookup item *tmp3 6
    43 setprop *tmp3 shard1 3000
    44 label *label24
-    * op add :i :i 1
+   45 op add :i 6 1
    46 label *label25
-    * lookup item *tmp3 :i
+   47 lookup item *tmp3 7
    48 setprop *tmp3 shard1 3000
    49 label *label26
-    * op add :i :i 1
+   50 op add :i 7 1
    51 label *label27
-    * lookup item *tmp3 :i
+   52 lookup item *tmp3 8
    53 setprop *tmp3 shard1 3000
    54 label *label28
-    * op add :i :i 1
+   55 op add :i 8 1
    56 label *label29
-    * lookup item *tmp3 :i
+   57 lookup item *tmp3 9
    58 setprop *tmp3 shard1 3000
    59 label *label30
-    * op add :i :i 1
+   60 op add :i 9 1
    61 label *label8
    62 label *label1
    63 jump *label0 always

Modifications by Iterated phase, Data Flow Optimization, pass 1, iteration 2 (-11 instructions):
 
     6 jump *label3 equal *tmp0 false
     7 label *label5
     8 control enabled switch1 false
-    * set :i 0
     9 label *label10
    10 label *label11
    11 lookup item *tmp3 0
    12 setprop *tmp3 shard1 3000
    13 label *label12
-    * op add :i 0 1
    14 label *label13
    15 lookup item *tmp3 1
    16 setprop *tmp3 shard1 3000
    17 label *label14
-    * op add :i 1 1
    18 label *label15
    19 lookup item *tmp3 2
    20 setprop *tmp3 shard1 3000
    21 label *label16
-    * op add :i 2 1
    22 label *label17
    23 lookup item *tmp3 3
    24 setprop *tmp3 shard1 3000
    25 label *label18
-    * op add :i 3 1
    26 label *label19
    27 lookup item *tmp3 4
    28 setprop *tmp3 shard1 3000
    29 label *label20
-    * op add :i 4 1
    30 label *label21
    31 lookup item *tmp3 5
    32 setprop *tmp3 shard1 3000
    33 label *label22
-    * op add :i 5 1
    34 label *label23
    35 lookup item *tmp3 6
    36 setprop *tmp3 shard1 3000
    37 label *label24
-    * op add :i 6 1
    38 label *label25
    39 lookup item *tmp3 7
    40 setprop *tmp3 shard1 3000
    41 label *label26
-    * op add :i 7 1
    42 label *label27
    43 lookup item *tmp3 8
    44 setprop *tmp3 shard1 3000
    45 label *label28
-    * op add :i 8 1
    46 label *label29
    47 lookup item *tmp3 9
    48 setprop *tmp3 shard1 3000
    49 label *label30
-    * op add :i 9 1
    50 label *label8
    51 label *label1
    52 jump *label0 always

Modifications by Iterated phase, Expression Optimization, pass 2, iteration 1:
 
     8 control enabled switch1 false
     9 label *label10
    10 label *label11
-    * lookup item *tmp3 0
+   11 set *tmp3 @copper
    12 setprop *tmp3 shard1 3000
    13 label *label12
    14 label *label13
-    * lookup item *tmp3 1
+   15 set *tmp3 @lead
    16 setprop *tmp3 shard1 3000
    17 label *label14
    18 label *label15
-    * lookup item *tmp3 2
+   19 set *tmp3 @metaglass
    20 setprop *tmp3 shard1 3000
    21 label *label16
    22 label *label17
-    * lookup item *tmp3 3
+   23 set *tmp3 @graphite
    24 setprop *tmp3 shard1 3000
    25 label *label18
    26 label *label19
-    * lookup item *tmp3 4
+   27 set *tmp3 @sand
    28 setprop *tmp3 shard1 3000
    29 label *label20
    30 label *label21
-    * lookup item *tmp3 5
+   31 set *tmp3 @coal
    32 setprop *tmp3 shard1 3000
    33 label *label22
    34 label *label23
-    * lookup item *tmp3 6
+   35 set *tmp3 @titanium
    36 setprop *tmp3 shard1 3000
    37 label *label24
    38 label *label25
-    * lookup item *tmp3 7
+   39 set *tmp3 @thorium
    40 setprop *tmp3 shard1 3000
    41 label *label26
    42 label *label27
-    * lookup item *tmp3 8
+   43 set *tmp3 @scrap
    44 setprop *tmp3 shard1 3000
    45 label *label28
    46 label *label29
-    * lookup item *tmp3 9
+   47 set *tmp3 @silicon
    48 setprop *tmp3 shard1 3000
    49 label *label30
    50 label *label8

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 1:
 
     9 label *label10
    10 label *label11
    11 set *tmp3 @copper
-    * setprop *tmp3 shard1 3000
+   12 setprop @copper shard1 3000
    13 label *label12
    14 label *label13
    15 set *tmp3 @lead
-    * setprop *tmp3 shard1 3000
+   16 setprop @lead shard1 3000
    17 label *label14
    18 label *label15
    19 set *tmp3 @metaglass
-    * setprop *tmp3 shard1 3000
+   20 setprop @metaglass shard1 3000
    21 label *label16
    22 label *label17
    23 set *tmp3 @graphite
-    * setprop *tmp3 shard1 3000
+   24 setprop @graphite shard1 3000
    25 label *label18
    26 label *label19
    27 set *tmp3 @sand
-    * setprop *tmp3 shard1 3000
+   28 setprop @sand shard1 3000
    29 label *label20
    30 label *label21
    31 set *tmp3 @coal
-    * setprop *tmp3 shard1 3000
+   32 setprop @coal shard1 3000
    33 label *label22
    34 label *label23
    35 set *tmp3 @titanium
-    * setprop *tmp3 shard1 3000
+   36 setprop @titanium shard1 3000
    37 label *label24
    38 label *label25
    39 set *tmp3 @thorium
-    * setprop *tmp3 shard1 3000
+   40 setprop @thorium shard1 3000
    41 label *label26
    42 label *label27
    43 set *tmp3 @scrap
-    * setprop *tmp3 shard1 3000
+   44 setprop @scrap shard1 3000
    45 label *label28
    46 label *label29
    47 set *tmp3 @silicon
-    * setprop *tmp3 shard1 3000
+   48 setprop @silicon shard1 3000
    49 label *label30
    50 label *label8
    51 label *label1

Modifications by Iterated phase, Data Flow Optimization, pass 2, iteration 2 (-10 instructions):
 
     8 control enabled switch1 false
     9 label *label10
    10 label *label11
-    * set *tmp3 @copper
    11 setprop @copper shard1 3000
    12 label *label12
    13 label *label13
-    * set *tmp3 @lead
    14 setprop @lead shard1 3000
    15 label *label14
    16 label *label15
-    * set *tmp3 @metaglass
    17 setprop @metaglass shard1 3000
    18 label *label16
    19 label *label17
-    * set *tmp3 @graphite
    20 setprop @graphite shard1 3000
    21 label *label18
    22 label *label19
-    * set *tmp3 @sand
    23 setprop @sand shard1 3000
    24 label *label20
    25 label *label21
-    * set *tmp3 @coal
    26 setprop @coal shard1 3000
    27 label *label22
    28 label *label23
-    * set *tmp3 @titanium
    29 setprop @titanium shard1 3000
    30 label *label24
    31 label *label25
-    * set *tmp3 @thorium
    32 setprop @thorium shard1 3000
    33 label *label26
    34 label *label27
-    * set *tmp3 @scrap
    35 setprop @scrap shard1 3000
    36 label *label28
    37 label *label29
-    * set *tmp3 @silicon
    38 setprop @silicon shard1 3000
    39 label *label30
    40 label *label8

Modifications by Jumps phase, Jump Normalization, pass 4, iteration 1:
 
     1 setprop @lead shard1 90
     2 label *label0
     3 label *label3
-    * label *label4
     4 sensor *tmp0 switch1 @enabled
     5 jump *label3 equal *tmp0 false
-    * label *label5
     6 control enabled switch1 false
-    * label *label10
-    * label *label11
     7 setprop @copper shard1 3000
-    * label *label12
-    * label *label13
     8 setprop @lead shard1 3000
-    * label *label14
-    * label *label15
     9 setprop @metaglass shard1 3000
-    * label *label16
-    * label *label17
    10 setprop @graphite shard1 3000
-    * label *label18
-    * label *label19
    11 setprop @sand shard1 3000
-    * label *label20
-    * label *label21
    12 setprop @coal shard1 3000
-    * label *label22
-    * label *label23
    13 setprop @titanium shard1 3000
-    * label *label24
-    * label *label25
    14 setprop @thorium shard1 3000
-    * label *label26
-    * label *label27
    15 setprop @scrap shard1 3000
-    * label *label28
-    * label *label29
    16 setprop @silicon shard1 3000
-    * label *label30
-    * label *label8
-    * label *label1
    17 jump *label0 always
-    * label *label2
    18 end

Modifications by Jumps phase, Unreachable Code Elimination, pass 4, iteration 1 (-1 instructions):
 
    15 setprop @scrap shard1 3000
    16 setprop @silicon shard1 3000
    17 jump *label0 always
-    * end

Final code before resolving virtual instructions:

    0:  setprop @copper shard1 120                                   shard1.setprop(@copper, 120);
    1:  setprop @lead shard1 90                                      shard1.setprop(@lead, 90);
        label *label0                                                while true do
        label *label3                                                do while !switch1.enabled;
    2:  sensor *tmp0 switch1 @enabled                                ...
    3:  jump *label3 equal *tmp0 false                               ...
    4:  control enabled switch1 false 0 0 0                          switch1.enabled = false;
    5:  setprop @copper shard1 3000                                  shard1.setprop(lookup(:item, i), 3000);
    6:  setprop @lead shard1 3000                                    ...
    7:  setprop @metaglass shard1 3000                               ...
    8:  setprop @graphite shard1 3000                                ...
    9:  setprop @sand shard1 3000                                    ...
   10:  setprop @coal shard1 3000                                    ...
   11:  setprop @titanium shard1 3000                                ...
   12:  setprop @thorium shard1 3000                                 ...
   13:  setprop @scrap shard1 3000                                   ...
   14:  setprop @silicon shard1 3000                                 ...
   15:  jump *label0 always 0 0                                      while true do


Performance: parsed in 100 ms, compiled in 188 ms, optimized in 114 ms, run in 3 ms.

Compiled mlog code was sent to Mlog Watcher.
  Mlog Watcher: success.

Program output (3 steps):
The program didn't generate any output.
Execution exception at instruction 2: sensor *tmp0 switch1 @enabled:
Instruction not supported by Mindcode emulator.
(Use the '#set err-unsupported-opcode = false;' directive or the '--err-unsupported-opcode false' command line option to ignore this exception.)
